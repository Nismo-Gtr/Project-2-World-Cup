<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Map</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">

  <style>
    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */

    #map {
      height: 100%;
    }

    /* Optional: Makes the sample page fill the window. */

    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Create Watch Party
  </button>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog model-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Create Watch Party</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form class="needs-validation" novalidate>
            <div class="form-row">
              <div class="col-md-4 mb-3">
                <label for="validationCustom01">First name</label>
                <input type="text" class="form-control" id="validationCustom01" placeholder="First name" value="Mark" required>
                <div class="valid-feedback">
                  Looks good!
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="validationCustom02">Last name</label>
                <input type="text" class="form-control" id="validationCustom02" placeholder="Last name" value="Otto" required>
                <div class="valid-feedback">
                  Looks good!
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="validationCustomUsername">Max Atendees</label>
                <div class="input-group">
                  <input type="text" class="form-control" id="validationCustomUsername" placeholder="" aria-describedby="inputGroupPrepend"
                    required>
                  <div class="invalid-feedback">
                    Please choose a username.
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="col-md-6 mb-3">
                <label for="validationCustom03">City</label>
                <input type="text" class="form-control" id="address" placeholder="City" value="191 Timber Oaks Drive, North Aurora, IL" required>
                <div class="invalid-feedback">
                  Please provide a valid city.
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <label for="validationCustom04">State</label>
                <input type="text" class="form-control" id="validationCustom04" placeholder="State" required>
                <div class="invalid-feedback">
                  Please provide a valid state.
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <label for="validationCustom05">Zip</label>
                <input type="text" class="form-control" id="validationCustom05" placeholder="Zip" required>
                <div class="invalid-feedback">
                  Please provide a valid zip.
                </div>
              </div>
            </div>
          </form>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button class="btn btn-primary" type="submit" id="submit" data-dismiss="modal">Submit form</button>

        </div>
      </div>
    </div>
  </div>
  <!-- <div id="floating-panel">
      <input id="address" type="textbox" value="Sydney, NSW">
      <input id="submit" type="button" value="Geocode">
    </div> -->
  <div id="map">
        <div id="map"></div>
  </div>
  <script>

    $('#exampleModal').on('shown.bs.modal', function () {
      $('#myInput').trigger('focus')
    })

    var map;
    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 12,
        center: new google.maps.LatLng(41.8781, -87.6298),
        mapTypeId: 'roadmap'
      });

      var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
      var icons = {
        parking: {
          icon: iconBase + 'parking_lot_maps.png'
        },
        library: {
          icon: iconBase + 'library_maps.png'
        },
        info: {
          icon: './soccer-game (1).png'
        }
      };

      var features = [
        {
          name: 'The Globe Pub',
          position: new google.maps.LatLng(41.9546, -87.6777),
          description: 
      '<div id="content">'+
      '<div id="siteNotice">'+
      '</div>'+
      '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
      '<div id="bodyContent">'+
      '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
      'sandstone rock formation in the southern part of the '+
      'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
      'south west of the nearest large town, Alice Springs; 450&#160;km '+
      '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
      'features of the Uluru - Kata Tjuta National Park. Uluru is '+
      'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
      'Aboriginal people of the area. It has many springs, waterholes, '+
      'rock caves and ancient paintings. Uluru is listed as a World '+
      'Heritage Site.</p>'+
      '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
      'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
      '(last visited June 22, 2009).</p>'+
      '</div>'+
      '</div>',
          type: 'info'
        }, {
          name: "Fado's Irish Pub",
          position: new google.maps.LatLng(41.8919, -87.6313),
          description: "<div>Fado's Irish Pub</div>",
          type: 'info'
        }, {
          name:  "Cleo's Bar and Grill",
          position: new google.maps.LatLng(41.8959, -87.6759),
          description: "<div>Cleo's Bar and Grill</div>",
          type: 'info'
        }, {
          name: "Theory",
          position: new google.maps.LatLng(41.8901, -87.6285),
          description: "<div>Theory</div>",
          type: 'info'
        }, {
          name: "The Scout Waterhouse + Kitchen",
          position: new google.maps.LatLng(41.8659, -87.6255),
          description: "<div>The Scout Waterhouse + Kitchen</div>",
          type: 'info'
        }, {
          name: "Lincoln Park South Fields",
          position: new google.maps.LatLng(41.9141, -87.6290),
          description: "<div>Lincoln Park South Fields</div>",
          type: 'info'
        }, {
          name: "AJ Hudson's Public House",
          position: new google.maps.LatLng(41.9509, -87.6686),
          description: "<div>AJ Hudson's Public House</div>",
          type: 'info'
        }, {
          name: "Chicago Fire Soccer Dome",
          position: new google.maps.LatLng(41.9478, -87.6954),
          description: "<div>Chicago Fire Soccer Dome</div>",
          type: 'info'
        }, {
          name: "Mckinley Park",
          position: new google.maps.LatLng(41.8239, -87.6824),
          description: "<div>Mckinley Park</div>",
          type: 'info'
        }, {
          name: "Hawthorne Soccer Field",
          position: new google.maps.LatLng(41.8340, -87.7620),
          description: "<div>Hawthorne Soccer Field</div>",
          type: 'info'
        }, {
          name: "Hopsmith Tavern", 
          position: new google.maps.LatLng(41.9040, -87.6293),
          description: "<div>Hopsmith Tavern</div>",
          type: 'info'
        }, {
          name: "Old Town Pour House",
          position: new google.maps.LatLng(41.9395, -87.6358),
          description: "<div>Old Town Pour House</div>",
          type: 'info'
        }, {
          name: "Will's Northwoods Inn",
          position: new google.maps.LatLng(41.9375, -87.6589),
          description: "<div>Will's Northwoods Inn</div>",
          type: 'info'
        }, {
          name: "ChiTown Futbol",
          position: new google.maps.LatLng(41.8497, -87.6579),
          description: "<div>ChiTown Futbol</div>",
          type: 'info'
        }, {
          name: "Timothy O'Toole's",
          position: new google.maps.LatLng(41.8935, -87.6204),
          description: "<div>Timothy O'Toole's</div>",
          type: 'info'
        }
      ];

      // Create markers.
      features.forEach(function (feature) {
        var infowindow = new google.maps.InfoWindow({
          content: feature.description
        });
        var marker = new google.maps.Marker({
          position: feature.position,
          icon: icons[feature.type].icon,
          map: map,
        });

  marker.addListener('click', function() {
    infowindow.open(map, marker);
  });
      });
     
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (function () {
        'use strict';
        window.addEventListener('load', function () {
          // Fetch all the forms we want to apply custom Bootstrap validation styles to
          var forms = document.getElementsByClassName('needs-validation');
          // Loop over them and prevent submission
          var validation = Array.prototype.filter.call(forms, function (form) {
            form.addEventListener('submit', function (event) {
              if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
              }
              form.classList.add('was-validated');
            }, false);
          });
        }, false);
      })();
      
      // This allows creating of new marker
      var geocoder = new google.maps.Geocoder();

        document.getElementById('submit').addEventListener('click', function() {
          geocodeAddress(geocoder, map);
        });
      }

      function geocodeAddress(geocoder, resultsMap) {
        var address = document.getElementById('address').value;
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location,
              icon: './soccer-game (1).png'
            });
            console.log(results);
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });


    }
      // Note: This example requires that you consent to location sharing when
      // prompted by your browser. If you see the error "The Geolocation service
      // failed.", it means you probably did not give permission for the browser to
      // locate you.

      // var map, infoWindow;
      // function initMap() {
      //   map = new google.maps.Map(document.getElementById('map'), {
      //     center: {lat: 41.8781, lng: -87.6298},
      //     zoom: 11
      //   });
      //   infoWindow = new google.maps.InfoWindow;

      var map, infoWindow;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 11
        });
      

        var icons = {
            watchParty: {
                name: "Viewing Party",
                icon: "icon image address goes here"
            },

            placesToWatch: {
                name: "Places to Watch",
                icon: "icon image address goes here"
            }
        };

        
        var features = [
          {
            position: new google.maps.LatLng(-33.91721, 151.22630),
            type: 'Viewing Party'
          }, {
            position: new google.maps.LatLng(-33.91539, 151.22820),
            type: 'Places to Watch'
          }
      ]

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent("You're Here!");
            infoWindow.open(map);
            map.setCenter(pos);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }


      //   var icons = {
      //       watchParty: {
      //           name: "Viewing Party",
      //           icon: "icon image address goes here"
      //       },

      //       placesToWatch: {
      //           name: "Places to Watch",
      //           icon: "icon image address goes here"
      //       }
      //   };


      //   var features = [
      //     {
      //       position: new google.maps.LatLng(-33.91721, 151.22630),
      //       type: 'Viewing Party'
      //     }, {
      //       position: new google.maps.LatLng(-33.91539, 151.22820),
      //       type: 'Places to Watch'
      //     }
      // ]

      //   // Try HTML5 geolocation.
      //   if (navigator.geolocation) {
      //     navigator.geolocation.getCurrentPosition(function(position) {
      //       var pos = {
      //         lat: position.coords.latitude,
      //         lng: position.coords.longitude
      //       };

      //       infoWindow.setPosition(pos);
      //       infoWindow.setContent("You're Here!");
      //       infoWindow.open(map);
      //       map.setCenter(pos);
      //     }, function() {
      //       handleLocationError(true, infoWindow, map.getCenter());
      //     });
      //   } else {
      //     // Browser doesn't support Geolocation
      //     handleLocationError(false, infoWindow, map.getCenter());
      //   }
      // }

      // function handleLocationError(browserHasGeolocation, infoWindow, pos) {
      //   infoWindow.setPosition(pos);
      //   infoWindow.setContent(browserHasGeolocation ?
      //                         'Error: The Geolocation service failed.' :
      //                         'Error: Your browser doesn\'t support geolocation.');
      //   infoWindow.open(map);
      // }
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCwBYAaZOV6J4PXhuaCD-IZ6OMxEopoNLU&callback=initMap">
  </script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</body>

</html>
